this.JST=this.JST||{},this.JST.checkboxItem=function(a){var b=[],c=a||{},d=c.name,e=c.value,f=c.checked,g=c.text;return b.push("<input"+jade.attrs({type:"checkbox",name:""+d+"[]",value:e,checked:f},{type:!0,name:!0,value:!0,checked:!0})+"/>"+(null==(jade.interp=g)?"":jade.interp)),b.join("")},function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Backbone.CheckboxItemView=function(c){function e(){return this.changed=b(this.changed,this),this.reset=b(this.reset,this),this.render=b(this.render,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.template=JST.checkboxItem,e.prototype.defaults={name:"input",text:null,value:null,selected:!1,inline:!1,checkedStyle:"input-checked-green"},e.prototype.tagName="label",e.prototype.className="checkbox",e.prototype.events={change:"changed"},e.prototype.initialize=function(){return this.options=_.defaults(this.options,this.defaults),this.listenTo(this.model,"change",this.render),this.$el.on("reset",this.reset),this.render()},e.prototype.render=function(){return _.isFunction(this.options.selected)&&(this.options.selected=this.options.selected(this.model)),this.options.inline&&this.$el.addClass("inline"),this.options.selected&&this.$el.addClass(this.options.checkedStyle),this.$el.html(this.template({name:_.isFunction(this.options.name)?this.options.name(this.model):this.options.name,text:_.isFunction(this.options.text)?this.options.text(this.model):this.model.get(this.options.text),value:_.isFunction(this.options.value)?this.options.value(this.model):this.model.get(this.options.value),checked:this.options.selected})),this.$input=this.$el.find("input"),this},e.prototype.reset=function(){return this.$el.removeClass(this.options.checkedStyle),this.$input.attr("checked",!1)},e.prototype.changed=function(){return"checked"===this.$el.find("input").attr("checked")?this.$el.addClass(this.options.checkedStyle):this.$el.removeClass(this.options.checkedStyle)},e}(Backbone.View)}.call(this),this.JST=this.JST||{},this.JST.checkboxList=function(a){var b=[],c=a||{},d=c.toggleButton;return b.push('<a class="btn pull-right"><i class="icon-check"></i><font>'+jade.escape(null==(jade.interp=d)?"":jade.interp)+'</font></a><div class="form-checkbox-list"></div>'),b.join("")},function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};Backbone.CheckboxListView=function(c){function e(){return this.selectToggle=b(this.selectToggle,this),this.renderCheckbox=b(this.renderCheckbox,this),this.render=b(this.render,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.template=JST.checkboxList,e.prototype.defaults={name:"input",text:null,value:null,inline:!1,defaultValue:[],selectAll:!1,checkedStyle:"input-checked-green",lang:"en"},e.prototype.events={"click .btn":"selectToggle"},e.prototype.dictionary={selectAll:{en:"Select All",cn:"全選"},deSelectAll:{en:"Cancel All",cn:"取消"}},e.prototype.initialize=function(){return this.options=_.defaults(this.options,this.defaults),this.selectAll=this.options.selectAll,this.listenTo(this.collection,"reset sync",this.renderCheckbox),this.render(),this},e.prototype.render=function(){return this.$el.html(this.template({toggleButton:this.options.selectAll?this.dictionary.deSelectAll[this.options.lang]:this.dictionary.selectAll[this.options.lang]})),this.renderCheckbox()},e.prototype.renderCheckbox=function(){var a,b=this;return a=this.$el.find(".form-checkbox-list"),a.empty(),this.collection.each(function(c){var d;return d=new CheckboxItemView({model:c,name:b.options.name,text:b.options.text,value:b.options.value,inline:b.options.inline,checkedStyle:b.options.checkedStyle,selected:_.include(b.options.defaultValue,c.get(b.options.value))||b.options.selectAll}),a.append(d.render().el)})},e.prototype.selectToggle=function(a){var b,c;return a.preventDefault(),b=$(a.currentTarget.parentElement).find("input:checkbox"),c=$(a.currentTarget.parentElement).find("label"),this.selectAll=!this.selectAll,this.selectAll?(b.attr("checked",!0),c.addClass(this.options.checkedStyle),$(a.currentTarget).find("> font ").html("Cancel")):(b.removeAttr("checked"),c.removeClass(this.options.checkedStyle),$(a.currentTarget).find("> font ").html("Select All"))},e}(Backbone.View)}.call(this);